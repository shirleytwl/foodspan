<div class="row">
	<div class="col-10">
		<h2>Storage</h2>
	</div>
	<div class="col-2">
		<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#add-ingredient">Add New</button>
	</div>
</div>
<div class="row">
	<div class="col-12">
		<table class="table">
		  <thead>
		    <tr>
		      <th scope="col">Ingredient</th>
		      <th scope="col">Qty</th>
		      <th scope="col">Expiring in</th>
		    </tr>
		  </thead>
		  <tbody>
		  	<% 	@ingredients.each do |ingredient|  %>
		  		<%
		    		start_date = DateTime.now
		    		end_date = ingredient.expiry_date
		    		days_remaining = (end_date - start_date).to_i
		    	%>
			    <tr>
			      <th scope="row"><%= ingredient.name%></th>
			      <td><%= ingredient.quantity_left%> <%= ingredient.unit%></td>
			      <td>
			      	<% if days_remaining >= 0 %>
			      		<span class="fresh"><%= days_remaining%></span>
			      	<% else %>
			      		<span class="expired"><%= days_remaining%></span>
		      		<% end %>
		      	</td>
			    </tr>
			  <% end %>
		  </tbody>
		</table>
	</div>
</div>

<div class="modal fade" id="add-ingredient" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Ingredient</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<form>
				  <div class="form-group">
				    <label for="name">Name</label>
				    <input type="text" name="name" class="form-control" placeholder="Name of Ingredient">
				  </div>
				  <div class="form-group">
				  	<div class="row">
				  		<div class="col-12">
						    <label for="quantity">Quantity</label>
						  </div>
				  		<div class="col-6">
				    		<input type="name" name="quantity_left" class="form-control" placeholder="Amount">
				    	</div>
				  		<div class="col-6">
				    		<input type="text" name="unit" class="form-control" placeholder="Unit">
				    	</div>
				    </div>
				  </div>
				  <div class="form-group">
				  	<label for="name">Purchased Date</label>
				  </div>
				  <button type="submit" class="btn btn-primary">Submit</button>
				</form>
      </div>
    </div>
  </div>
</div>
<% if user_signed_in? %>
  <li>
  <%= link_to('Logout', destroy_user_session_path, method: :delete) %>
  </li>
<% else %>
  <li>
  <%= link_to('Login', new_user_session_path) %>
  </li>
<% end %>